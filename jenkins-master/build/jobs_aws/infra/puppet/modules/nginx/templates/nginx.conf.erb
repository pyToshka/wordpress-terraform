user <%= @user %>;
worker_processes <%= @worker_processes %>;

error_log <%= @error_log %> warn;
pid       <%= @pid %>;


events {
    worker_connections <%= @worker_connections %>;
}


http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    # Log module settings
    log_format main <%= @log_format_main %>;
    log_format stat <%= @log_format_stat %>;
    #log_format syslog <%= @log_format_syslog %>;
    access_log <%= @access_log %> main;

    # Core module settings
    sendfile <%= @sendfile %>;
    sendfile_max_chunk <%= @sendfile_max_chunk %>;
    send_timeout <%= @send_timeout %>;
    output_buffers <%= @output_buffers %>;
    postpone_output <%= @postpone_output %>;
    tcp_nopush <%= @tcp_nopush %>;
    tcp_nodelay <%= @tcp_nodelay %>;

    keepalive_timeout <%= @keepalive_timeout %>;
    keepalive_requests <%= @keepalive_requests %>;
    keepalive_disable <%= @keepalive_disable %>;

    client_body_buffer_size <%= @client_body_buffer_size %>;
    client_body_in_file_only <%= @client_body_in_file_only %>;
    client_body_in_single_buffer <%= @client_body_in_single_buffer %>;
    client_body_temp_path <%= @client_body_temp_path %>;
    client_body_timeout <%= @client_body_timeout %>;
    client_max_body_size <%= @client_max_body_size %>;
    client_header_buffer_size <%= @client_header_buffer_size %>;
    client_header_timeout <%= @client_header_timeout %>;
    large_client_header_buffers <%= @large_client_header_buffers %>;
    fastcgi_connect_timeout       <%= @fastcgi_connect_timeout %>;
    fastcgi_send_timeout          <%= @fastcgi_send_timeout %>;
    fastcgi_read_timeout          <%= @fastcgi_read_timeout %>;
    # Gzip module settings
    gzip <%= @gzip %>;
    gzip_buffers <%= @gzip_buffers %>;
    gzip_comp_level <%= @gzip_comp_level %>;
    gzip_disable <%= @gzip_disable %>;
    gzip_min_length <%= @gzip_min_length %>;
    gzip_http_version <%= @gzip_http_version %>;
    gzip_proxied <%= @gzip_proxied %>;
    gzip_types <%= @gzip_types %>;
    gzip_vary <%= @gzip_vary %>; 
    real_ip_header X-Forwarded-For;
    set_real_ip_from <%= @cidr %>;
    real_ip_recursive on;
    add_header Set-Cookie "CLUSTERNODEID=$hostname;Path=/";
    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}

